{% extends "layouts/base.html" %}

{% block title %} Newspaper detail info {% endblock %}

{% block body_class %} index-page {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

  <div class="page-header min-vh-25" style="background-image: url('https://cdn.pixabay.com/photo/2016/02/01/00/56/news-1172463_640.jpg')">
    <span class="mask bg-gradient-dark opacity-6"></span>
  </div>
  <div class="card card-body shadow-xl mx-3 mx-md-4 mt-n6">
    <div class="container">
      <div class="section text">
        <h1>Newspaper detail info
          <a class="btn btn-primary" href="{% url 'agency:redactor-create' %}">Create</a>
        </h1>
        <br>
          <h2>{{ newspaper.title }}
            <a class="btn btn-secondary" href="{% url 'agency:newspaper-update' newspaper.id %}">Update</a>

            <a class="btn btn-danger" href="{% url 'agency:newspaper-delete' newspaper.id %}">Delete</a>
          </h2>
          <h3>Topic:</h3>
          {% for topic in newspaper.topics.all %}
            <ul>
              <li>{{ topic.name }}</li>
            </ul>
            {% empty %}
            <p>This newspaper has no assigned topics yet</p>
          {% endfor %}
          <h3>Redactors:
          {% if request.user in newspaper.publishers.all %}
            <form action="{% url 'agency:newspaper-update-redactor' pk=newspaper.id %}" method="post">
              {% csrf_token %}
              <input type="submit" class="btn btn-danger" value="Delete me from this newspaper">
            </form>
            {% else %}
            <form action="{% url 'agency:newspaper-update-redactor' pk=newspaper.id %}" method="post">
              {% csrf_token %}
              <input type="submit" class="btn btn-success" value="Assign me to this newspaper">
            </form>
          {% endif %}
          </h3>

          {% for redactor in newspaper.publishers.all %}
            <ul>
              <li><strong>Username:</strong> {{ redactor.username }} </li>
              <li><strong>Full name:</strong> {{ redactor.first_name }} {{ redactor.last_name }} </li>
              <li><strong>Years of experience:</strong> {{ redactor.years_of_experience }} </li>
            </ul>
            {% empty %}
            <p>This newspaper has no assigned redactors yet</p>
          {% endfor %}
      </div>
    </div>
  </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}
